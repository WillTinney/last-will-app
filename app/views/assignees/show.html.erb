<% content_for(:navbar) do %>
  <%= render 'shared/navbar' %>
<% end %>

<% content_for(:sidebar) do %>
  <%= render 'shared/sidebars/sidebar_assignee' %>
<% end %>

<div class="dashboard-box">
  <div id="tab-content">
    <div class="0" id="profile-content">
      <%= render 'assignees/profile' %>
    </div>

    <div class="2 hidden" id="details-content">
      <%= render file: 'assignees/edit' %>
    </div>

    <div class="4 hidden" id="notes-content">
      <%= render file: 'assignees/notes' %>
    </div>

    <div class="6 hidden" id="admin-content">
      <%= render file: 'assignees/references' %>
    </div>

    <div class="8 hidden" id="photos-content">
      <%= render file: 'assignees/photos' %>
    </div>

    <div class="10 hidden" id="videos-content">
      <%= render file: 'assignees/videos' %>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
  <script>
    // Changes active scrollmenu user
    $('.scrollbox').children().removeClass("active");

    var assigneeId = <%= @assignee.id %>

    $('.scrollitem h6').filter(function () {
        return $(this).text() == assigneeId;
    }).parentsUntil('.scrollmenu').addClass('active');

    // AJAX to load tab content without a refresh
//     $('#show-profile-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %>,
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });
//     $('#show-details-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %> + "/edit",
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });
//     $('#show-notes-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %> + "/notes",
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });
//     $('#show-admin-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %> + "/references",
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });
//     $('#show-photos-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %> + "/photos",
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });
//     $('#show-videos-sidebar-tab').click(function(e){
//       e.preventDefault();
//       $.ajax({
//           type: "GET",
//           url: <%= @assignee.id %>  + "/videos",
//           data: { },
//           success: function(data){
//               $('#tab-content').html(data);
//           }
//       });
//     });

    // Clicking on platform icons loads on profile tab loads tab content
    $('#assignee-details-icon').click(function(e){
      e.preventDefault();
      $('.sidebar-tabs').children().removeClass('active');
      $('#profile-content').addClass('hidden');
      $('#show-details-sidebar-tab').addClass('active');
      $('#details-content').removeClass('hidden');
    });
    $('#assignee-notes-icon').click(function(e){
      e.preventDefault();
      $('.sidebar-tabs').children().removeClass('active');
      $('#profile-content').addClass('hidden');
      $('#show-notes-sidebar-tab').addClass('active');
      $('#notes-content').removeClass('hidden');
    });
    $('#assignee-admin-icon').click(function(e){
      e.preventDefault();
      $('.sidebar-tabs').children().removeClass('active');
      $('#profile-content').addClass('hidden');
      $('#show-admin-sidebar-tab').addClass('active');
      $('#admin-content').removeClass('hidden');
    });
    $('#assignee-photo-icon').click(function(e){
      e.preventDefault();
      $('.sidebar-tabs').children().removeClass('active');
      $('#profile-content').addClass('hidden');
      $('#show-photos-sidebar-tab').addClass('active');
      $('#photos-content').removeClass('hidden');
    });
    $('#assignee-video-icon').click(function(e){
      e.preventDefault();
      $('.sidebar-tabs').children().removeClass('active');
      $('#profile-content').addClass('hidden');
      $('#show-videos-sidebar-tab').addClass('active');
      $('#videos-content').removeClass('hidden');
    });
  </script>
<% end %>
